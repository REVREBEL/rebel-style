
<style>
.share-icons-wrapper{
  position: fixed;
  inset: auto 1rem 20vh auto; /* example placement: bottom-right; tweak */
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
  z-index: 999; /* make sure it’s above RTE and images */
}
.share-icons-wrapper.is-visible{
  opacity: 1;
  pointer-events: auto;
}
</style>



<script>
(function () {
  // Prevent double-init in Webflow preview
  if (window.__revShareInit) return; 
  window.__revShareInit = true;

  const LATE_UPDATE_DELAY = 300;
  const FINAL_UPDATE_DELAY = 1200;

  function ready(fn){ 
    if (document.readyState !== 'loading') fn(); 
    else document.addEventListener('DOMContentLoaded', fn, { once: true }); 
  }

  ready(function () {
    // Grab targets – prefer a data hook if you have one
    const wrapper = document.querySelector('.share-icons-wrapper');
    const section = document.querySelector('[data-section="blog-detail"]') || 
                  document.querySelector('.blog-detail');

    if (!wrapper || !section) return;

    // Visibility logic: show when any meaningful part of section is in view
    const MIN_FRACTION = 0.1; // require at least 10% of section or viewport overlap

    function computeVisibleFraction(rect, viewportHeight){
      const top = Math.max(0, rect.top);
      const bottom = Math.min(viewportHeight, rect.bottom);
      const visible = Math.max(0, bottom - top);
      const basis = Math.min(viewportHeight, rect.height || 1);
      return visible / basis;
    }

    let ticking = false;

    function update(){
      if (ticking) return;
      ticking = true;
      window.requestAnimationFrame(() => {
        const rect = section.getBoundingClientRect();
        const viewportHeight = window.innerHeight || document.documentElement.clientHeight;
        const frac = computeVisibleFraction(rect, viewportHeight);
        const onScreen = frac >= MIN_FRACTION;
        wrapper.classList.toggle('is-visible', onScreen);
        ticking = false;
      });
    }

    // Listen + react to layout changes
    const passiveOpts = { passive: true };
    window.addEventListener('scroll', update, passiveOpts);
    window.addEventListener('resize', update, passiveOpts);

    // Track section size/content changes (images, fonts)
    if ('ResizeObserver' in window){
      const ro = new ResizeObserver(update);
      ro.observe(section);
    }

    // In case Webflow IX manipulates DOM late
    requestAnimationFrame(update);
    setTimeout(update, LATE_UPDATE_DELAY);
    setTimeout(update, FINAL_UPDATE_DELAY);
  });
})();
</script>
